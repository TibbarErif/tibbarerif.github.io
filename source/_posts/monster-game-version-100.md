---
title: 《名为怪物的游戏》ver1.0.0更新记录
date: 2021-06-24 15:19:44
tags:
 - 最新进度

categories:
 - 名为怪物的游戏
---
## 前言
后续的更新不定期发布，有一定进度的时候就会发布一次。
按照日期划分，记录每日更新内容，此更新也包含 Cee 的制作进度。

## 更新记录
这篇文章将会记录 Ver1.0.0 即第一章的全部更新内容。
由于篇幅比较长就用最简单的条目形式记录下来了。
中间也会插入一些制作过程的想法，相当于游戏制作日记一样。

### 6月23日
- 游戏系统的初步计划确定
- 修复对话框下标不显示动画问题
- 修复对话框UI在不同系统/分辨率可能显示不全的问题
- 减少序章剧情调查事件的部分无意义文字内容

**已知问题记录**
在发给以前上班的同事测试的时候，出现了对话卡死的 BUG。
具体原因不明，可能是跟电脑系统有关。
除此之外，有群友反馈 Win7 系统开头的小游戏很卡。
目前这两个问题测试的样本太少，无法确定到底是代码出 BUG 了还是因为电脑系统的差异导致。
如果有遇到相同的问题的请联系 QQ：874811226 反馈，将你的情况上报有助于我们分析问题。

### 6月24日
- 确认主线剧情大纲
- 增加客厅剧情电视新闻女主持人的对话音效
- 修复场景中触碰到多个事件，事件选择面板显示的事件列表会出现重复/未触碰的事件问题
- 修复FC游戏按下确定键声音突然变大问题
- 增加场景切换时的渐变淡出效果
- 确认进入战斗的方式
- 确认后续场景展示效果

素材方面：
- 完成神秘少女 Nameless 立绘

**战斗系统的考虑因素**
传统的回合制战斗需要切换到一个独立的战斗场景，战斗结束后再切换回原场景。
最典型的例子就是口袋妖怪走两步就遇到一个拦路的 NPC，这样频繁的切换场景会大幅增加玩家的不耐烦情绪。
在我玩过的所有回合制游戏中，《帽子世界》的战斗系统是最优秀的一个。
在场景中无缝切换到战斗（直接将地图作为战斗场景），战斗结束时再恢复原位，没有任何切换、淡入淡出效果。
也就是说这种无缝衔接的战斗不会中断玩家的操作，并且战斗节奏非常快，一场战斗可能 5s 就结束。
帽子世界的战斗系统几乎不会产生不耐烦的情绪，所以战斗系统方面将会参考帽子世界的进行设计。

### 6月25日
- 「阵型系统」草案
- 战斗 UI 基本布局确定
- 基础菜单系统
- 战斗指令菜单

**阵型系统**
回合制游戏的站位一直都没有什么特殊意义。
有的虽然区分前卫和后卫，但也比较简单，只是前卫增加了被敌人攻击的概率而已。
比较值得参考的是梦幻西游的阵型系统，不同阵型有不同的属性加成，而且不同的站位也不一样。
这样我们就可以设计出很丰富的阵型效果了，阵型和出战角色的组合也能丰富策略性。

### 6月26日
- 血条、攻击条和技能条
- 基本玩家角色
- 基本敌人角色
- 基本战斗布局

素材方面：
- 战斗基本 UI 素材

### 6月27日
- 补充 Ace 行走图缺失的一帧
- 血条、攻击条和技能条重置
- 第一章剧本改动进行中
- 攻击条的加载

**血条、攻击条和技能条重置**
原本是用 unity 自带的 slider 实现血条，将血条制成了 UI。
吸取了之前做 FC 小游戏的教训，UI 做的血条不方便移动，所以就自己用精灵做一个血条效果。
最后的效果如下：
![血条和攻击条（白色）](https://i.loli.net/2021/06/27/Wkgxin8NLwo2UIp.png)

![攻击条的加载效果](https://i.loli.net/2021/06/27/uYLtXkex8nqGChv.gif)

**后续计划**
Cee 已经完成了战斗需要的大部分 UI 素材了，战斗系统也在有条不紊的开发中。
由于这个系统牵扯的范围比较大，所以制作周期会长一点。
计划在 7 月 4 日之前完成战斗系统雏形。
下周开始 Cee 制作主菜单相关的素材，如果顺利的话，在 7 月中旬就可以完成第一章需要的大部分系统。
如果能赶在 7 月 15 日之前完成大部分的系统，剩下两周的时间说不定可以把第一章全部做完。

### 6月28日
- 角色获得行动回合
- BOSS 状态栏

**ABB 战斗系统**
今天的制作任务是战斗系统的核心部分。
本作的战斗系统是 Attack Bar Battle（攻击条战斗）模式，简称 ABB（自称）。
其实这种模式很早之前就有了，最早源于《最终幻想》系列，不同的是叫做 Active Time Battle（即时战斗回合制）。
即时战斗的意思是不管玩家有没有操作，时间都在流逝，如果你来不及做出反应，敌人的拳头就会糊在你脸上。
个人觉得，回合制策略游戏的意义就在于每一次行动的思考，而不是考验玩家的临时反应。
因此本作的战斗系统是 ATB 模式的改版，保留了时间条的设计，同时取消强制玩家快速反应的操作，当玩家获得回合时，时间就会停止。
同时加入了一个“插队机制”避免战斗过于公式化，当玩家获得行动机会时，并且行动已结束，在下一个角色获得行动机会的同时，全场的其他角色都会临时额外的增加一次攻击条，这种情况就叫做「插队机制」。
可以观察下图的攻击条变化，当第二个角色获得行动机会的时候，明显看到第一个行动结束的角色获得了“一丝”的攻击条。
这“一丝”的攻击条里面暗藏了很多玄机，这也是本作战斗系统最大的策略之一。
![获得行动机会](https://i.loli.net/2021/06/28/rJmFejl49iEbpRt.gif)

> 插队机制：跟游戏为什么要加入暴击几率和伤害浮动一样，就是为了避免战斗系统过于“公式化”，所谓的公式化就是做了 A 就一定能得到 B 的结果，玩游戏的乐趣在于随机性，而不是明确知道自己能得到什么结果，好比投骰子，如果所有人都能知道下一次投出的点数，就没人会对投骰子产生乐趣了。本作的战斗系统也是同理，如果你知道自己的角色速度快就一定能比对方先出手，就会失去紧张感，但因为「插队机制」的存在，当你控制的角色攻击条已经满了的时候，而敌人还差一丝，这个时候如果触发了插队机制，即使你的攻击条先满（但是有攻击条溢出的情况，最终会判定攻击条溢出最多的角色先行动），敌人却可以“抢先插队”而获得行动机会，这就是战斗中的不确定性。可能还是有人无法理解为什么要这么做，那就再打个比方，游戏玩到极致的话，就是“一波流”，通俗的讲就是“互秒”，谁先行动，谁就取得胜利。一波流的核心要点在于：Buff手、爆发性AOE、先制，这三点缺一不可。首先是先制，需要保证自己的三名角色比对方先行动，也就是说必须取得「先制权」，其中一个辅助负责拉条（把攻击条拉满），接着轮到BUFF手给C位增加攻击力，最后轮到C位释放爆发性的AOE技能把对面全秒。这一套配合简单粗暴，但是其中一环断了都是致命的，如果用“公式化”的方式，玩家每次操作都是固定的，这一套就无懈可击，但如果加入不确定性的「插队机制」，玩家在试图打出一套伤害之前，敌人插队了，那这套一波流就失败了，也就是说，公式化是『零风险』的行为，但我们需要让玩家做出的每一个选择都「伴随着风险」，这就是随机性。

### 6月29日
- 技能选择面板
- 多级菜单联动效果

演示效果：
![多级菜单及技能选择面板](https://i.loli.net/2021/06/29/Ib12BGyQDjYOAT5.gif)

**多级菜单联动效果**
存在子菜单的时候，父菜单就不能直接关闭。
此处对原来的「栈」结构进行了一些小小的调整。
基于面向对象的思想，添加了菜单的父级。
当子菜单按下取消键的时候，按键监听的权限就会归还父类然后销毁子类菜单。
在子菜单按下确认键的时候，通过递归销毁所有父类菜单。
这样菜单监听权限以及窗口的销毁就全部变成被动式触发的了，不需要写代码单独控制。