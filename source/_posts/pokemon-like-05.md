---
title: 代号：宝可梦（三）
date: 2021-06-09 11:06:27
tags:
 - unity
 - 开发技术

categories:
 - 代号：宝可梦
 - 制作过程
---
# 存档系统
口袋妖怪系列的游戏一般只能有一个存档。

但是这样有个不好的地方就是如果其他人想在这台机子上玩就不能重新开始。

所以多个存档还是有必要的，决定采用 4 个档案位置。

玩家可以一个存档保存多份，也可以在每个档案的地方都新建一个存档。

而且存档会以单独的文件形式存放，以后如果其他玩家分享了通关存档，就可以直接导入使用了。
（还可以方便排查 BUG，只要玩家将能够复现 BUG 的存档发给我即可）

没有云存档，想要在多台电脑上面同步进度也可以直接把存档文件复制过去。

参考仙剑 4 的存档 UI，设计一个简单的存档界面即可。

![仙剑4存档UI](https://files.catbox.moe/vnhguy.jpg)

自己设计的存档 UI。

![存档UI](https://files.catbox.moe/p1yevu.jpg)

昨天晚上已经把本地存储功能做好了，现在只要实现存档界面的操作即可。

先用简单的图块代替，看起来有点丑陋但只是临时的，以后再美化。

![存档UI2](https://files.catbox.moe/skw0cw.jpg)

加上按键控制，完成版：

![存档系统完成版](https://files.catbox.moe/v6mfng.gif)

# 游戏地图
游戏采用与口袋妖怪游戏一样的四方向行走图。

## 调查事件问题
玩家可以在地图上与 NPC 对话以及调查物体等等。

![与NPC对话](https://files.catbox.moe/mcsesx.jpg)

要实现对话和调查是比较麻烦的，按照一般的逻辑考虑，先判断玩家的朝向，再判断玩家前方是否存在可以调查的对象。

朝向比较容易解决，但是如何判断玩家前方或者脚底存在可以调查的物体呢？

计算坐标？那样需要把地图上所有 NPC 的坐标搜集起来，不是一件容易的事。

当我觉得要为这个问题苦恼一阵子的时候，突然灵机一动。

只要跟之前设计的“垃圾桶怪”的警戒区域一样的设计就可以了。

玩家控制的角色身上挂着一个调查触发器，这是一个范围检测器。

![调查触发器](https://files.catbox.moe/r4vifo.jpg)

当 NPC 或者可调查物体进入触发器的范围时，玩家按下 Z 键，即可判断当前与玩家接触的对象，获取该对象并且执行调查/对话事件。

## 控制玩家的移动
在之前研究宝可梦室内地图的时候已经完成了简单的角色控制。

![控制角色移动](https://files.catbox.moe/vlxb26.gif)

但是碰撞和图层还是有点问题。

等开始制作地图的时候，再根据实际情况想解决的方法。

# 确认弹窗
除了之前弄好的提示框，还有一个很常见的确认弹窗。

在读取存档的时候给与玩家提示避免误操作。

![确认弹窗](https://files.catbox.moe/ddcdvj.jpg)

# 后言
虽然现在是全职在开发，但还是会有日常其他琐事干扰。

昨天为了做一个网站的功能忙了一个晚上，一边想着赚钱维持生计，一边实现梦想。

现在这个阶段可能是最黑暗的阶段了，但是如果能成功的话，我们就能拥有一间自己的工作室了。